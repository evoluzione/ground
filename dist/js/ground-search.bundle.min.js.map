{"version":3,"file":"ground-search.bundle.min.js","mappings":"iVASqBA,EAAAA,WAIpB,WAAYC,GAAS,Y,4FAAA,SACpBC,KAAKD,QAAUA,GAAW,iBAC1BC,KAAKC,IAAM,CACVC,KAAMC,SAASC,gBACfC,KAAMF,SAASE,KACfN,QAASI,SAASG,eAAeN,KAAKD,SACtCQ,aAAcJ,SAASG,eAAe,oBACtCE,YAAaL,SAASG,eAAe,mBACrCG,WAAYN,SAASG,eAAe,kBACpCI,cAAeP,SAASG,eAAe,qBACvCK,eAAgBR,SAASG,eAAe,kBACxCM,aAAcT,SAASG,eAAe,yBACtCO,YAAaV,SAASG,eAAe,yBAEtCN,KAAKc,aAAL,UCVM,GAAP,OAAUC,OAAOC,SAASC,SAA1B,aAAuCF,OAAOC,SAASE,MDUtD,4BACAlB,KAAKmB,mBAAqB,oBAGzBnB,KAAKoB,OAGNL,OAAOM,iBAAiB,UAAU,YAC5BC,EAAAA,EAAAA,KAAWC,MACf,EAAKtB,IAAIC,KAAKsB,UAAUC,OAAO,kBAC/B,EAAKxB,IAAIQ,WAAWe,UAAUC,OAAO,kBACrC,EAAKL,W,yCAKR,WAAO,WAON,GANIL,OAAOW,WAAW,uBAAuBC,QACxC3B,KAAKC,IAAIM,cAAcP,KAAKC,IAAIM,aAAaqB,OAAO5B,KAAKC,IAAIU,gBAE7DX,KAAKC,IAAIS,eAAeV,KAAKC,IAAIS,cAAckB,OAAO5B,KAAKC,IAAIU,gBAGpC,IAA5BX,KAAKC,IAAIF,QAAQ8B,OAArB,CAIA,IEzCuBC,EAAYC,EAChCC,EFwCGC,GEzCiBH,EFyCQ,WAC9B,EAAKI,UACH,IEtCG,WAGN,IAAMC,EAAUnC,KAEVoC,EAAOC,UAIPC,EAAQ,WAEbN,EAAU,KAGMF,EAAKS,MAAMJ,EAASC,IAK/BI,EAAUT,EAMhBU,aAAaT,GAIbA,EAAUU,WAAWJ,EFSlB,KELCE,GAASV,EAAKS,MAAMJ,EAASC,KFOjCpC,KAAKC,IAAIY,YAAYQ,iBAAiB,SAAS,WAC9C,EAAKpB,IAAIC,KAAKsB,UAAUmB,IAAI,kBAC5B,EAAK1C,IAAIQ,WAAWe,UAAUmB,IAAI,qBAEnC3C,KAAKC,IAAIY,YAAYQ,iBAAiB,QAASY,GAC/CjC,KAAKC,IAAIO,YAAYa,iBAAiB,SAAS,WAC9C,EAAKpB,IAAI2C,YAAc,S,oBAIzB,WAAS,WACFA,EAAc5C,KAAKC,IAAIY,YAAYgC,MACzC7C,KAAKC,IAAIO,YAAYa,iBAAiB,SAAS,WAC9C,EAAKpB,IAAI2C,YAAc,MAGJ,KAAhBA,GAIJ5C,KAAK8C,aAEL/B,OACEgC,MAAM/C,KAAKc,aAAc,CACzBkC,OAAQ,OACRC,QAAS,CACR,eAAgB,oDAEjB5C,KAAM,6BAAF,OAA+BuC,KAEnCM,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAAChD,GAAD,OAAU,EAAKmD,QAAQnD,MAC5BoD,OAAM,SAACC,GACHC,EAAAA,GAEHC,QAAQF,MAAM,WAAYA,OAlB5BvD,KAAKC,IAAIW,aAAa8C,UAAY,K,wBAuBpC,WACC1D,KAAKC,IAAIF,QAAQyB,UAAUmB,IAAI3C,KAAKmB,oBACpCnB,KAAKC,IAAIW,aAAa8C,UAAY,K,qBAGnC,SAAQxD,GACPF,KAAKC,IAAIF,QAAQyB,UAAUC,OAAOzB,KAAKmB,oBACvCnB,KAAKC,IAAIW,aAAa8C,UAAYxD,O,sEAhGfJ","sources":["webpack://ground/./assets/js/components/search.js","webpack://ground/./assets/js/utilities/paths.js","webpack://ground/./assets/js/utilities/debounce.js"],"sourcesContent":["/**\n * Search module\n */\n\nimport { getSiteUrl } from '../utilities/paths';\nimport { debounce } from '../utilities/debounce';\nimport { DEBUG_MODE } from '../utilities/environment';\nimport isMobile from 'ismobilejs';\n\nexport default class Search {\n\t/**\n\t * @param {string} element - Selector\n\t */\n\tconstructor(element) {\n\t\tthis.element = element || 'js-ajax-search';\n\t\tthis.DOM = {\n\t\t\thtml: document.documentElement,\n\t\t\tbody: document.body,\n\t\t\telement: document.getElementById(this.element),\n\t\t\tsearchMobile: document.getElementById('js-search-mobile'),\n\t\t\tsearchClose: document.getElementById('js-search-close'),\n\t\t\tsearchForm: document.getElementById('js-search-form'),\n\t\t\tsearchDesktop: document.getElementById('js-search-desktop'),\n\t\t\tsearchFormAjax: document.getElementById('js-ajax-search'),\n\t\t\tsearchResult: document.getElementById('js-ajax-search-result'),\n\t\t\tsearchInput: document.getElementById('js-ajax-search-input')\n\t\t};\n\t\tthis.adminAjaxUrl = `${getSiteUrl()}/wp-admin/admin-ajax.php`;\n\t\tthis.searchLoadingClass = 'is-search-loading';\n\n\t\t// window.addEventListener('DOMContentLoaded', () => {\n\t\t\tthis.init();\n\t\t// });\n\n\t\twindow.addEventListener('resize', () => {\n\t\t\tif (!isMobile().any) {\n\t\t\t\tthis.DOM.html.classList.remove('is-search-open');\n\t\t\t\tthis.DOM.searchForm.classList.remove('is-search-open');\n\t\t\t\tthis.init();\n\t\t\t}\n\t\t});\n\t}\n\n\tinit() {\n\t\tif (window.matchMedia('(max-width: 1024px)').matches) {\n\t\t\tif (this.DOM.searchMobile) this.DOM.searchMobile.append(this.DOM.searchFormAjax);\n\t\t} else {\n\t\t\tif (this.DOM.searchDesktop) this.DOM.searchDesktop.append(this.DOM.searchFormAjax);\n\t\t}\n\n\t\tif (this.DOM.element.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst debounceInput = debounce(() => {\n\t\t\tthis.search();\n\t\t}, 250);\n\n\t\tthis.DOM.searchInput.addEventListener('input', () => {\n\t\t\tthis.DOM.html.classList.add('is-search-open');\n\t\t\tthis.DOM.searchForm.classList.add('is-search-open');\n\t\t});\n\t\tthis.DOM.searchInput.addEventListener('input', debounceInput);\n\t\tthis.DOM.searchClose.addEventListener('click', () => {\n\t\t\tthis.DOM.searchValue = '';\n\t\t});\n\t}\n\n\tsearch() {\n\t\tconst searchValue = this.DOM.searchInput.value;\n\t\tthis.DOM.searchClose.addEventListener('click', () => {\n\t\t\tthis.DOM.searchValue = '';\n\t\t});\n\n\t\tif (searchValue === '') {\n\t\t\tthis.DOM.searchResult.innerHTML = '';\n\t\t\treturn;\n\t\t}\n\t\tthis.beforeSend();\n\n\t\twindow\n\t\t\t.fetch(this.adminAjaxUrl, {\n\t\t\t\tmethod: 'post',\n\t\t\t\theaders: {\n\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\t\t\t},\n\t\t\t\tbody: `action=data_fetch&keyword=${searchValue}`\n\t\t\t})\n\t\t\t.then((res) => res.text())\n\t\t\t.then((html) => this.success(html))\n\t\t\t.catch((error) => {\n\t\t\t\tif (DEBUG_MODE) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error('ðŸ”¥Error:', error);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tbeforeSend() {\n\t\tthis.DOM.element.classList.add(this.searchLoadingClass);\n\t\tthis.DOM.searchResult.innerHTML = '';\n\t}\n\n\tsuccess(html) {\n\t\tthis.DOM.element.classList.remove(this.searchLoadingClass);\n\t\tthis.DOM.searchResult.innerHTML = html;\n\t}\n}\n","/**\n * Paths\n */\n\n/**\n * Get template url\n * @returns {string}\n */\nexport function getTemplateUrl() {\n\treturn document.body.dataset.templateUrl;\n}\n\n/**\n * Get site url\n * @returns {string}\n */\nexport function getSiteUrl() {\n\treturn `${window.location.protocol}//${window.location.host}`;\n}\n\n/**\n * Get current url\n * @returns {string}\n */\nexport function getCurrentUrl() {\n\treturn `${window.location.protocol}//${window.location.host}${window.location.pathname}${window.location.search}`;\n}\n","/**\n * Debounce\n */\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not be triggered.\n * The function will be called after it stops being called for N milliseconds.\n * If 'immediate' is passed, trigger the function on the leading edge, instead of the trailing.\n * @see https://davidwalsh.name/javascript-debounce-function\n * @param {function} func - Function to wrap\n * @param {number} wait - Timeout in ms (`100`)\n * @param {boolean} immediate - Whether to execute at the beginning (`false`)\n */\nexport function debounce(func, wait, immediate) {\n\tlet timeout;\n\n\t// This is the function that is actually executed when\n\t// the DOM event is triggered.\n\treturn function executedFunction() {\n\t\t// Store the context of this and any\n\t\t// parameters passed to executedFunction\n\t\tconst context = this;\n\t\t// eslint-disable-next-line prefer-rest-params\n\t\tconst args = arguments;\n\n\t\t// The function to be called after\n\t\t// the debounce time has elapsed\n\t\tconst later = () => {\n\t\t\t// null timeout to indicate the debounce ended\n\t\t\ttimeout = null;\n\n\t\t\t// Call function now if you did not on the leading end\n\t\t\tif (!immediate) func.apply(context, args);\n\t\t};\n\n\t\t// Determine if you should call the function\n\t\t// on the leading or trail end\n\t\tconst callNow = immediate && !timeout;\n\n\t\t// This will reset the waiting every function execution.\n\t\t// This is the step that prevents the function from\n\t\t// being executed because it will never reach the\n\t\t// inside of the previous setTimeout\n\t\tclearTimeout(timeout);\n\n\t\t// Restart the debounce waiting period.\n\t\t// setTimeout returns a truthy value (it differs in web vs node)\n\t\ttimeout = setTimeout(later, wait);\n\n\t\t// Call immediately if you're dong a leading\n\t\t// end execution\n\t\tif (callNow) func.apply(context, args);\n\t};\n}\n"],"names":["Search","element","this","DOM","html","document","documentElement","body","getElementById","searchMobile","searchClose","searchForm","searchDesktop","searchFormAjax","searchResult","searchInput","adminAjaxUrl","window","location","protocol","host","searchLoadingClass","init","addEventListener","isMobile","any","classList","remove","matchMedia","matches","append","length","func","immediate","timeout","debounceInput","search","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","add","searchValue","value","beforeSend","fetch","method","headers","then","res","text","success","catch","error","DEBUG_MODE","console","innerHTML"],"sourceRoot":""}