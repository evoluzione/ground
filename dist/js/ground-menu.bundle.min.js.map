{"version":3,"file":"ground-menu.bundle.min.js","mappings":"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","sources":["webpack://ground/./assets/js/components/menu.js","webpack://ground/./assets/js/utilities/throttle.js"],"sourcesContent":["import isMobile from 'ismobilejs';\nimport { throttle } from '../utilities/throttle';\n\nexport default class Menu {\n\t/**\n\t * @param {string} element - Selector\n\t */\n\tconstructor(element) {\n\t\tthis.element = element || '.navigation__item.has-children';\n\t\tthis.defaults = {\n\t\t\ttriggers: this.element,\n\t\t\tlevel: 0\n\t\t};\n\n\t\tthis.DOM = {\n\t\t\telement: document.querySelectorAll(this.element),\n\t\t\thtml: document.querySelector('html'),\n\t\t\tback: document.querySelectorAll('.js-back'),\n\t\t\tnavicon: document.querySelector('.js-navicon'),\n\t\t\tmenuBody: document.querySelector('.js-menu-body'),\n\t\t\tmenuContainer: document.querySelector('.js-menu-container'),\n\t\t\tcloseOverlayPanel: document.querySelector('.js-close-overlay-panel'),\n\t\t\tclosePanel: document.querySelector('.js-close-panel'),\n\t\t\tmenuPanel: document.querySelector('.js-navigation-panel')\n\t\t};\n\n\t\t/**\n\t\t * We need different unit measure\n\t\t * The panel isn't fullwidth so the % is correct\n\t\t * The menu on mobile instead needs vw because the % create an offset each level bigger\n\t\t */\n\t\tthis.unitMeasure = {\n\t\t\tpanel: '%',\n\t\t\tdefault: 'vw'\n\t\t};\n\n\t\t// window.addEventListener('DOMContentLoaded', () => {\n\t\tthis.init();\n\t\t// });\n\n\t\t/**\n\t\t * Bind the resize of the window to restore normal conditions\n\t\t */\n\t\twindow.addEventListener('resize', this.handleOnResizeMenu);\n\t}\n\n\t/**\n\t * Use throttle to avoid high fire rate of the function\n\t */\n\thandleOnResizeMenu = throttle(() => {\n\t\tthis.resetTransformStyle([this.DOM.menuContainer, this.DOM.menuPanel]);\n\t\tthis.DOM.html.classList.remove('is-navigation-open', 'is-sub-navigation-open', 'is-overlay-panel-open');\n\t\tthis.removeAllClass();\n\t});\n\n\t/**\n\t * Add inline style \"transform: none\" for each element\n\t * @param {array} elementList\n\t */\n\tresetTransformStyle(elementList) {\n\t\telementList.forEach((element) => {\n\t\t\tif (element) {\n\t\t\t\telement.style.cssText += 'transform: none';\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Remove all class to restore normal conditions\n\t */\n\tremoveAllClass() {\n\t\tfor (let i = 0; i <= this.defaults.level - 1; i++) {\n\t\t\tthis.DOM.element.forEach((item) => {\n\t\t\t\tif (item.classList.contains('level' + i)) {\n\t\t\t\t\titem.classList.remove('level' + i);\n\t\t\t\t\titem.childNodes.forEach((t) =>\n\t\t\t\t\t\tt.classList && t.classList.contains('is-active') ? t.classList.remove('is-active') : null\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.defaults.level = 0;\n\t}\n\n\t/**\n\t * Getter function that return the unit measure to handle animation\n\t * @param {*} menu\n\t */\n\tgetUnitMeasure(menu) {\n\t\tif (menu && menu.classList.contains('js-navigation-panel')) {\n\t\t\treturn this.unitMeasure.panel;\n\t\t}\n\n\t\treturn this.unitMeasure.default;\n\t}\n\n\t/**\n\t * Gestione dei submenu delle navigation\n\t * @param {*} item l'elemento che ho cliccato\n\t * @param {*} menu il menu di riferimento\n\t * @returns\n\t */\n\tmultiLevelMenu = (item, menu) => {\n\t\tconst unitMeasure = this.getUnitMeasure(menu);\n\n\t\tlet subMenu = null;\n\t\tlet subMenuImage = null;\n\n\t\titem.target.parentNode.childNodes.forEach((sub) => {\n\t\t\tsub.classList && sub.classList.contains('navigation__sub-menu') ? (subMenu = sub) : null;\n\t\t\tsub.classList && sub.classList.contains('navigation__image') ? (subMenuImage = sub) : null;\n\t\t});\n\n\t\tif (subMenu && menu) {\n\t\t\titem.preventDefault();\n\n\t\t\titem.target.parentElement.classList.add('level' + this.defaults.level);\n\t\t\tthis.DOM.html.classList.add('is-sub-navigation-open');\n\n\t\t\tsubMenu.classList.add('is-active');\n\t\t\tsubMenuImage && subMenuImage.classList.add('is-active');\n\n\t\t\tthis.defaults.level++;\n\t\t\tlet translation = -100 * this.defaults.level;\n\t\t\tmenu.style.cssText += `transform: translateX(${translation}${unitMeasure});`;\n\n\t\t\tthis.DOM.menuBody.scrollTo({\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\tbehavior: 'smooth'\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Gestione dei back\n\t * @param {*} menu il menu di riferimento\n\t */\n\tmultiLevelBack = (menu) => {\n\t\tconst unitMeasure = this.getUnitMeasure(menu);\n\n\t\tif (this.defaults.level > 0) {\n\t\t\tthis.defaults.level--;\n\t\t\tthis.DOM.element.forEach((item) => {\n\t\t\t\tif (item.classList.contains('level' + this.defaults.level)) {\n\t\t\t\t\titem.classList.remove('level' + this.defaults.level);\n\t\t\t\t\titem.childNodes.forEach((t) =>\n\t\t\t\t\t\tt.classList && t.classList.contains('is-active') ? t.classList.remove('is-active') : null\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlet translation = -100 * this.defaults.level;\n\t\t\tmenu.style.cssText += `transform: translateX(${translation}${unitMeasure});`;\n\n\t\t\tthis.defaults.level == 0 ? this.DOM.html.classList.remove('is-sub-navigation-open') : null;\n\t\t}\n\t};\n\n\t/**\n\t * Reset All\n\t * @param {*} e The event to stop\n\t */\n\tresetAll(e) {\n\t\te.stopImmediatePropagation();\n\t\tthis.DOM.html.classList.remove('is-sub-navigation-open', 'is-overlay-panel-open');\n\t\tthis.resetTransformStyle([this.DOM.menuContainer, this.DOM.menuPanel]);\n\t\tthis.removeAllClass();\n\t}\n\n\t/**\n\t * Gestione dei livelli del drilldown - navigation items\n\t */\n\thandleLevelNavigation() {\n\t\tthis.DOM.element.forEach((item) => {\n\t\t\t/**\n\t\t\t * Create a span to handle drilldown and preserve link to navigate\n\t\t\t */\n\t\t\tconst span = document.createElement('span');\n\t\t\tspan.classList = 'js-drilldown';\n\t\t\titem.appendChild(span);\n\n\t\t\titem.addEventListener('click', (t) => {\n\t\t\t\tconst classList = t.target.className;\n\t\t\t\tconst isDrilldown = classList && classList.includes('js-drilldown');\n\n\t\t\t\tif (isDrilldown) {\n\t\t\t\t\tt.stopImmediatePropagation();\n\t\t\t\t\tt.preventDefault();\n\n\t\t\t\t\tif (window.matchMedia('(max-width:1024px)').matches) {\n\t\t\t\t\t\t//Attivo la transtion sul container dell'header per il mobile\n\t\t\t\t\t\tthis.multiLevelMenu(t, this.DOM.menuContainer);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Attivo la transtion sul panel-primary per il desk\n\t\t\t\t\t\tconst isPanel = t.target.parentNode.classList.contains('navigation__item--panel-primary');\n\t\t\t\t\t\tif (isPanel) {\n\t\t\t\t\t\t\tthis.multiLevelMenu(t, this.DOM.menuPanel);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Gestione dei livelli del drilldown - Back btn\n\t */\n\thandleLevelBackNavigation() {\n\t\tthis.DOM.back.forEach((b) => {\n\t\t\tb.addEventListener('click', (t) => {\n\t\t\t\tt.stopImmediatePropagation();\n\n\t\t\t\tif (window.matchMedia('(max-width:1024px)').matches) {\n\t\t\t\t\t//Attivo il back transition sul container dell'header per il mobile\n\t\t\t\t\tthis.multiLevelBack(this.DOM.menuContainer);\n\t\t\t\t} else {\n\t\t\t\t\t//Attivo il back transtion sul panel-primary per il desk\n\t\t\t\t\tthis.multiLevelBack(this.DOM.menuPanel);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Se clicco la navicon resetto tutto\n\t */\n\thandleNaviconClick() {\n\t\tif (this.DOM.navicon) {\n\t\t\tthis.DOM.navicon.addEventListener('click', (e) => this.resetAll(e));\n\t\t}\n\t}\n\n\t/**\n\t * Se clicco il close di navigation panel resetto tutto\n\t */\n\thandleCloseNavigationPanel() {\n\t\tif (this.DOM.closePanel) {\n\t\t\tthis.DOM.closePanel.addEventListener('click', (e) => this.resetAll(e));\n\t\t}\n\t}\n\n\t/**\n\t * Se clicco l'overlay-panel di navigation panel resetto tutto (solo NON mobile)\n\t */\n\thandleCloseOverlayPanel() {\n\t\tif (this.DOM.closeOverlayPanel && !isMobile().any) {\n\t\t\tthis.DOM.closeOverlayPanel.addEventListener('click', (e) => this.resetAll(e));\n\t\t}\n\t}\n\n\tinit() {\n\t\tif (!this.DOM.element.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.handleLevelNavigation();\n\t\tthis.handleLevelBackNavigation();\n\t\tthis.handleNaviconClick();\n\t\tthis.handleCloseNavigationPanel();\n\t\tthis.handleCloseOverlayPanel();\n\t}\n}\n","function throttle(cb, delay = 1000) {\n\tlet shouldWait = false;\n\tlet waitingArgs;\n\n\tconst timeoutFunc = () => {\n\t\tif (waitingArgs == null) {\n\t\t\tshouldWait = false;\n\t\t} else {\n\t\t\tcb(...waitingArgs);\n\t\t\twaitingArgs = null;\n\t\t\tsetTimeout(timeoutFunc, delay);\n\t\t}\n\t};\n\n\treturn (...args) => {\n\t\tif (shouldWait) {\n\t\t\twaitingArgs = args;\n\t\t\treturn;\n\t\t}\n\n\t\tcb(...args);\n\t\tshouldWait = true;\n\n\t\tsetTimeout(timeoutFunc, delay);\n\t};\n}\n\nexport { throttle };\n"],"names":["Menu","constructor","element","cb","waitingArgs","delay","shouldWait","timeoutFunc","setTimeout","args","throttle","this","resetTransformStyle","DOM","menuContainer","menuPanel","html","classList","remove","removeAllClass","item","menu","unitMeasure","getUnitMeasure","subMenu","subMenuImage","target","parentNode","childNodes","forEach","sub","contains","preventDefault","parentElement","add","defaults","level","translation","style","cssText","menuBody","scrollTo","top","left","behavior","t","triggers","document","querySelectorAll","querySelector","back","navicon","closeOverlayPanel","closePanel","panel","default","init","window","addEventListener","handleOnResizeMenu","elementList","i","resetAll","e","stopImmediatePropagation","handleLevelNavigation","span","createElement","appendChild","className","includes","matchMedia","matches","multiLevelMenu","handleLevelBackNavigation","b","multiLevelBack","handleNaviconClick","handleCloseNavigationPanel","handleCloseOverlayPanel","isMobile","any","length"],"sourceRoot":""}