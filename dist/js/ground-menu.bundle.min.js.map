{"version":3,"file":"ground-menu.bundle.min.js","mappings":"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","sources":["webpack://ground/./assets/js/components/menu.js","webpack://ground/./assets/js/utilities/throttle.js"],"sourcesContent":["import isMobile from 'ismobilejs';\nimport { throttle } from '../utilities/throttle';\n\nexport default class Menu {\n\t/**\n\t * @param {string} element - Selector\n\t */\n\tconstructor(element) {\n\t\tthis.element = element || '.navigation__item.has-children';\n\t\tthis.defaults = {\n\t\t\ttriggers: this.element,\n\t\t\tlevel: 0,\n\t\t};\n\n\t\tthis.DOM = {\n\t\t\telement: document.querySelectorAll(this.element),\n\t\t\thtml: document.querySelector('html'),\n\t\t\tback: document.querySelectorAll('.js-back'),\n\t\t\tnavicon: document.querySelector('.js-navicon'),\n\t\t\tmenuBody: document.querySelector('.js-menu-body'),\n\t\t\tmenuContainer: document.querySelector('.js-menu-container'),\n\t\t\tcloseOverlayPanel: document.querySelector('.js-close-overlay-panel'),\n\t\t\tclosePanel: document.querySelector('.js-close-panel'),\n\t\t\tmenuPanel: document.querySelector('.js-navigation-panel'),\n\t\t};\n\n\t\t/**\n\t\t * We need different unit measure\n\t\t * The panel isn't fullwidth so the % is correct\n\t\t * The menu on mobile instead needs vw because the % create an offset each level bigger\n\t\t */\n\t\tthis.unitMeasure = {\n\t\t\tpanel: '%',\n\t\t\tdefault: 'vw',\n\t\t};\n\n\t\t// window.addEventListener('DOMContentLoaded', () => {\n\t\tthis.init();\n\t\t// });\n\n\t\t/**\n\t\t * Bind the resize of the window to restore normal conditions\n\t\t */\n\t\twindow.addEventListener('resize', this.handleOnResizeMenu);\n\t}\n\n\t/**\n\t * Use throttle to avoid high fire rate of the function\n\t */\n\thandleOnResizeMenu = throttle(() => {\n\t\tthis.resetTransformStyle([this.DOM.menuContainer, this.DOM.menuPanel]);\n\t\tthis.DOM.html.classList.remove(\n\t\t\t'is-navigation-open',\n\t\t\t'is-sub-navigation-open',\n\t\t\t'is-overlay-panel-open',\n\t\t);\n\t\tthis.removeAllClass();\n\t});\n\n\t/**\n\t * Add inline style \"transform: none\" for each element\n\t * @param {array} elementList\n\t */\n\tresetTransformStyle(elementList) {\n\t\telementList.forEach((element) => {\n\t\t\tif (element) {\n\t\t\t\telement.style.cssText += 'transform: none';\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Remove all class to restore normal conditions\n\t */\n\tremoveAllClass() {\n\t\tfor (let i = 0; i <= this.defaults.level - 1; i++) {\n\t\t\tthis.DOM.element.forEach((item) => {\n\t\t\t\tif (item.classList.contains(`level${i}`)) {\n\t\t\t\t\titem.classList.remove(`level${i}`);\n\t\t\t\t\titem.childNodes.forEach((t) =>\n\t\t\t\t\t\tt.classList?.contains('is-active')\n\t\t\t\t\t\t\t? t.classList.remove('is-active')\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.defaults.level = 0;\n\t}\n\n\t/**\n\t * Getter function that return the unit measure to handle animation\n\t * @param {*} menu\n\t */\n\tgetUnitMeasure(menu) {\n\t\tif (menu?.classList.contains('js-navigation-panel')) {\n\t\t\treturn this.unitMeasure.panel;\n\t\t}\n\n\t\treturn this.unitMeasure.default;\n\t}\n\n\t/**\n\t * Gestione dei submenu delle navigation\n\t * @param {*} item l'elemento che ho cliccato\n\t * @param {*} menu il menu di riferimento\n\t * @returns\n\t */\n\tmultiLevelMenu = (item, menu) => {\n\t\tconst unitMeasure = this.getUnitMeasure(menu);\n\n\t\tlet subMenu = null;\n\t\tlet subMenuImage = null;\n\n\t\titem.target.parentNode.childNodes.forEach((sub) => {\n\t\t\tsub.classList?.contains('navigation__sub-menu') ? (subMenu = sub) : null;\n\t\t\tsub.classList?.contains('navigation__image')\n\t\t\t\t? (subMenuImage = sub)\n\t\t\t\t: null;\n\t\t});\n\n\t\tif (subMenu && menu) {\n\t\t\titem.preventDefault();\n\n\t\t\titem.target.parentElement.classList.add(`level${this.defaults.level}`);\n\t\t\tthis.DOM.html.classList.add('is-sub-navigation-open');\n\n\t\t\tsubMenu.classList.add('is-active');\n\t\t\tsubMenuImage?.classList.add('is-active');\n\n\t\t\tthis.defaults.level++;\n\t\t\tlet translation = -100 * this.defaults.level;\n\t\t\tmenu.style.cssText += `transform: translateX(${translation}${unitMeasure});`;\n\n\t\t\tthis.DOM.menuBody.scrollTo({\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Gestione dei back\n\t * @param {*} menu il menu di riferimento\n\t */\n\tmultiLevelBack = (menu) => {\n\t\tconst unitMeasure = this.getUnitMeasure(menu);\n\n\t\tif (this.defaults.level > 0) {\n\t\t\tthis.defaults.level--;\n\t\t\tthis.DOM.element.forEach((item) => {\n\t\t\t\tif (item.classList.contains(`level${this.defaults.level}`)) {\n\t\t\t\t\titem.classList.remove(`level${this.defaults.level}`);\n\t\t\t\t\titem.childNodes.forEach((t) =>\n\t\t\t\t\t\tt.classList?.contains('is-active')\n\t\t\t\t\t\t\t? t.classList.remove('is-active')\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlet translation = -100 * this.defaults.level;\n\t\t\tmenu.style.cssText += `transform: translateX(${translation}${unitMeasure});`;\n\n\t\t\tthis.defaults.level === 0\n\t\t\t\t? this.DOM.html.classList.remove('is-sub-navigation-open')\n\t\t\t\t: null;\n\t\t}\n\t};\n\n\t/**\n\t * Reset All\n\t * @param {*} e The event to stop\n\t */\n\tresetAll(e) {\n\t\te.stopImmediatePropagation();\n\t\tthis.DOM.html.classList.remove(\n\t\t\t'is-sub-navigation-open',\n\t\t\t'is-overlay-panel-open',\n\t\t);\n\t\tthis.resetTransformStyle([this.DOM.menuContainer, this.DOM.menuPanel]);\n\t\tthis.removeAllClass();\n\t}\n\n\t/**\n\t * Gestione dei livelli del drilldown - navigation items\n\t */\n\thandleLevelNavigation() {\n\t\tthis.DOM.element.forEach((item) => {\n\t\t\t/**\n\t\t\t * Create a span to handle drilldown and preserve link to navigate\n\t\t\t */\n\t\t\tconst span = document.createElement('span');\n\t\t\tspan.classList = 'js-drilldown';\n\t\t\titem.appendChild(span);\n\n\t\t\titem.addEventListener('click', (t) => {\n\t\t\t\tconst classList = t.target.className;\n\t\t\t\tconst isDrilldown = classList?.includes('js-drilldown');\n\n\t\t\t\tif (isDrilldown) {\n\t\t\t\t\tt.stopImmediatePropagation();\n\t\t\t\t\tt.preventDefault();\n\n\t\t\t\t\tif (window.matchMedia('(max-width:1024px)').matches) {\n\t\t\t\t\t\t//Attivo la transtion sul container dell'header per il mobile\n\t\t\t\t\t\tthis.multiLevelMenu(t, this.DOM.menuContainer);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Attivo la transtion sul panel-primary per il desk\n\t\t\t\t\t\tconst isPanel = t.target.parentNode.classList.contains(\n\t\t\t\t\t\t\t'navigation__item--panel-primary',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (isPanel) {\n\t\t\t\t\t\t\tthis.multiLevelMenu(t, this.DOM.menuPanel);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Gestione dei livelli del drilldown - Back btn\n\t */\n\thandleLevelBackNavigation() {\n\t\tthis.DOM.back.forEach((b) => {\n\t\t\tb.addEventListener('click', (t) => {\n\t\t\t\tt.stopImmediatePropagation();\n\n\t\t\t\tif (window.matchMedia('(max-width:1024px)').matches) {\n\t\t\t\t\t//Attivo il back transition sul container dell'header per il mobile\n\t\t\t\t\tthis.multiLevelBack(this.DOM.menuContainer);\n\t\t\t\t} else {\n\t\t\t\t\t//Attivo il back transtion sul panel-primary per il desk\n\t\t\t\t\tthis.multiLevelBack(this.DOM.menuPanel);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Se clicco la navicon resetto tutto\n\t */\n\thandleNaviconClick() {\n\t\tif (this.DOM.navicon) {\n\t\t\tthis.DOM.navicon.addEventListener('click', (e) => this.resetAll(e));\n\t\t}\n\t}\n\n\t/**\n\t * Se clicco il close di navigation panel resetto tutto\n\t */\n\thandleCloseNavigationPanel() {\n\t\tif (this.DOM.closePanel) {\n\t\t\tthis.DOM.closePanel.addEventListener('click', (e) => this.resetAll(e));\n\t\t}\n\t}\n\n\t/**\n\t * Se clicco l'overlay-panel di navigation panel resetto tutto (solo NON mobile)\n\t */\n\thandleCloseOverlayPanel() {\n\t\tif (this.DOM.closeOverlayPanel && !isMobile().any) {\n\t\t\tthis.DOM.closeOverlayPanel.addEventListener('click', (e) =>\n\t\t\t\tthis.resetAll(e),\n\t\t\t);\n\t\t}\n\t}\n\n\tinit() {\n\t\tif (!this.DOM.element.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.handleLevelNavigation();\n\t\tthis.handleLevelBackNavigation();\n\t\tthis.handleNaviconClick();\n\t\tthis.handleCloseNavigationPanel();\n\t\tthis.handleCloseOverlayPanel();\n\t}\n}\n","function throttle(cb, delay = 1000) {\n\tlet shouldWait = false;\n\tlet waitingArgs;\n\n\tconst timeoutFunc = () => {\n\t\tif (waitingArgs == null) {\n\t\t\tshouldWait = false;\n\t\t} else {\n\t\t\tcb(...waitingArgs);\n\t\t\twaitingArgs = null;\n\t\t\tsetTimeout(timeoutFunc, delay);\n\t\t}\n\t};\n\n\treturn (...args) => {\n\t\tif (shouldWait) {\n\t\t\twaitingArgs = args;\n\t\t\treturn;\n\t\t}\n\n\t\tcb(...args);\n\t\tshouldWait = true;\n\n\t\tsetTimeout(timeoutFunc, delay);\n\t};\n}\n\nexport { throttle };\n"],"names":["Menu","constructor","element","this","defaults","triggers","level","DOM","document","querySelectorAll","html","querySelector","back","navicon","menuBody","menuContainer","closeOverlayPanel","closePanel","menuPanel","unitMeasure","panel","default","init","window","addEventListener","handleOnResizeMenu","cb","waitingArgs","delay","arguments","length","undefined","shouldWait","timeoutFunc","setTimeout","_len","args","Array","_key","throttle","resetTransformStyle","classList","remove","removeAllClass","elementList","forEach","style","cssText","i","item","contains","childNodes","t","getUnitMeasure","menu","multiLevelMenu","subMenu","subMenuImage","target","parentNode","sub","preventDefault","parentElement","add","translation","scrollTo","top","left","behavior","multiLevelBack","resetAll","e","stopImmediatePropagation","handleLevelNavigation","span","createElement","appendChild","className","isDrilldown","includes","matchMedia","matches","handleLevelBackNavigation","b","handleNaviconClick","handleCloseNavigationPanel","handleCloseOverlayPanel","isMobile","any"],"sourceRoot":""}