{"version":3,"file":"search.bundle.js","mappings":"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","sources":["webpack://ground/./js/components/search.js","webpack://ground/./js/utilities/debounce.js","webpack://ground/./js/utilities/environment.js","webpack://ground/./js/utilities/paths.js"],"sourcesContent":["/**\n * Search module\n */\n\nimport { getSiteUrl } from '../utilities/paths';\nimport { debounce } from '../utilities/debounce';\nimport { DEBUG_MODE } from '../utilities/environment';\nimport isMobile from 'ismobilejs';\n\nexport default class Search {\n\t/**\n\t * @param {string} element - Selector\n\t */\n\tconstructor(element) {\n\t\tthis.element = element || 'js-ajax-search';\n\t\tthis.DOM = {\n\t\t\thtml: document.documentElement,\n\t\t\tbody: document.body,\n\t\t\telement: document.getElementById(this.element),\n\t\t\tsearchMobile: document.getElementById('js-search-mobile'),\n\t\t\tsearchClose: document.getElementById('js-search-close'),\n\t\t\tsearchForm: document.getElementById('js-search-form'),\n\t\t\tsearchDesktop: document.getElementById('js-search-desktop'),\n\t\t\tsearchFormAjax: document.getElementById('js-ajax-search'),\n\t\t\tsearchResult: document.getElementById('js-ajax-search-result'),\n\t\t\tsearchInput: document.getElementById('js-ajax-search-input')\n\t\t};\n\t\tthis.adminAjaxUrl = `${getSiteUrl()}/wp-admin/admin-ajax.php`;\n\t\tthis.searchLoadingClass = 'is-search-loading';\n\n\t\t// window.addEventListener('DOMContentLoaded', () => {\n\t\t\tthis.init();\n\t\t// });\n\n\t\twindow.addEventListener('resize', () => {\n\t\t\tif (!isMobile().any) {\n\t\t\t\tthis.DOM.html.classList.remove('is-search-open');\n\t\t\t\tthis.DOM.searchForm.classList.remove('is-search-open');\n\t\t\t\tthis.init();\n\t\t\t}\n\t\t});\n\t}\n\n\tinit() {\n\t\tif (window.matchMedia('(max-width: 1024px)').matches) {\n\t\t\tif (this.DOM.searchMobile) this.DOM.searchMobile.append(this.DOM.searchFormAjax);\n\t\t} else {\n\t\t\tif (this.DOM.searchDesktop) this.DOM.searchDesktop.append(this.DOM.searchFormAjax);\n\t\t}\n\n\t\tif (this.DOM.element.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst debounceInput = debounce(() => {\n\t\t\tthis.search();\n\t\t}, 250);\n\n\t\tthis.DOM.searchInput.addEventListener('input', () => {\n\t\t\tthis.DOM.html.classList.add('is-search-open');\n\t\t\tthis.DOM.searchForm.classList.add('is-search-open');\n\t\t});\n\t\tthis.DOM.searchInput.addEventListener('input', debounceInput);\n\t\tthis.DOM.searchClose.addEventListener('click', () => {\n\t\t\tthis.DOM.searchValue = '';\n\t\t});\n\t}\n\n\tsearch() {\n\t\tconst searchValue = this.DOM.searchInput.value;\n\t\tthis.DOM.searchClose.addEventListener('click', () => {\n\t\t\tthis.DOM.searchValue = '';\n\t\t});\n\n\t\tif (searchValue === '') {\n\t\t\tthis.DOM.searchResult.innerHTML = '';\n\t\t\treturn;\n\t\t}\n\t\tthis.beforeSend();\n\n\t\twindow\n\t\t\t.fetch(this.adminAjaxUrl, {\n\t\t\t\tmethod: 'post',\n\t\t\t\theaders: {\n\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\t\t\t},\n\t\t\t\tbody: `action=data_fetch&keyword=${searchValue}`\n\t\t\t})\n\t\t\t.then((res) => res.text())\n\t\t\t.then((html) => this.success(html))\n\t\t\t.catch((error) => {\n\t\t\t\tif (DEBUG_MODE) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error('ðŸ”¥Error:', error);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tbeforeSend() {\n\t\tthis.DOM.element.classList.add(this.searchLoadingClass);\n\t\tthis.DOM.searchResult.innerHTML = '';\n\t}\n\n\tsuccess(html) {\n\t\tthis.DOM.element.classList.remove(this.searchLoadingClass);\n\t\tthis.DOM.searchResult.innerHTML = html;\n\t}\n}\n","/**\n * Debounce\n */\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not be triggered.\n * The function will be called after it stops being called for N milliseconds.\n * If 'immediate' is passed, trigger the function on the leading edge, instead of the trailing.\n * @see https://davidwalsh.name/javascript-debounce-function\n * @param {function} func - Function to wrap\n * @param {number} wait - Timeout in ms (`100`)\n * @param {boolean} immediate - Whether to execute at the beginning (`false`)\n */\nexport function debounce(func, wait, immediate) {\n\tlet timeout;\n\n\t// This is the function that is actually executed when\n\t// the DOM event is triggered.\n\treturn function executedFunction() {\n\t\t// Store the context of this and any\n\t\t// parameters passed to executedFunction\n\t\tconst context = this;\n\t\t// eslint-disable-next-line prefer-rest-params\n\t\tconst args = arguments;\n\n\t\t// The function to be called after\n\t\t// the debounce time has elapsed\n\t\tconst later = () => {\n\t\t\t// null timeout to indicate the debounce ended\n\t\t\ttimeout = null;\n\n\t\t\t// Call function now if you did not on the leading end\n\t\t\tif (!immediate) func.apply(context, args);\n\t\t};\n\n\t\t// Determine if you should call the function\n\t\t// on the leading or trail end\n\t\tconst callNow = immediate && !timeout;\n\n\t\t// This will reset the waiting every function execution.\n\t\t// This is the step that prevents the function from\n\t\t// being executed because it will never reach the\n\t\t// inside of the previous setTimeout\n\t\tclearTimeout(timeout);\n\n\t\t// Restart the debounce waiting period.\n\t\t// setTimeout returns a truthy value (it differs in web vs node)\n\t\ttimeout = setTimeout(later, wait);\n\n\t\t// Call immediately if you're dong a leading\n\t\t// end execution\n\t\tif (callNow) func.apply(context, args);\n\t};\n}\n","/**\n * Shared constants\n */\n\nexport const DEBUG_MODE = false;\n","/**\n * Paths\n */\n\n/**\n * Get template url\n * @returns {string}\n */\nexport function getTemplateUrl() {\n\treturn document.body.dataset.templateUrl;\n}\n\n/**\n * Get site url\n * @returns {string}\n */\nexport function getSiteUrl() {\n\treturn `${window.location.protocol}//${window.location.host}`;\n}\n\n/**\n * Get current url\n * @returns {string}\n */\nexport function getCurrentUrl() {\n\treturn `${window.location.protocol}//${window.location.host}${window.location.pathname}${window.location.search}`;\n}\n"],"names":["getSiteUrl","debounce","DEBUG_MODE","isMobile","Search","element","DOM","html","document","documentElement","body","getElementById","searchMobile","searchClose","searchForm","searchDesktop","searchFormAjax","searchResult","searchInput","adminAjaxUrl","searchLoadingClass","init","window","addEventListener","any","classList","remove","matchMedia","matches","append","length","debounceInput","search","add","searchValue","value","innerHTML","beforeSend","fetch","method","headers","then","res","text","success","catch","error","console","func","wait","immediate","timeout","executedFunction","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","getTemplateUrl","dataset","templateUrl","location","protocol","host","getCurrentUrl","pathname"],"sourceRoot":""}