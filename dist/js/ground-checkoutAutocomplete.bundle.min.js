"use strict";(self.webpackChunkground=self.webpackChunkground||[]).push([[897],{162:function(t,e,i){i.r(e),i.d(e,{default:function(){return c}});var s=i(996),o=i.n(s);class c{constructor(t,e){this.element=t||"form.woocommerce-checkout",this.defaults={triggers:this.element},this.options=e?o()(this.defaults,e):this.defaults,this.init()}citiesJson=[];selectOption={placeholder:"Seleziona un'opzione..."};selectCountry=jQuery("#billing_country");selectState=jQuery("#billing_state");selectCity=jQuery("#billing_city");selectPostcode=jQuery("#billing_postcode");async init(){this.getJson()}initializeSelect2Fields(t){t.forEach((t=>t.select2({...this.selectOption,disabled:!0})))}getJson(){const t=document.body.dataset.templateUrl;t&&jQuery.getJSON(`${t}/data/db/Cities-it.json`,(function(t){return t})).then((t=>{this.citiesJson=t,t.length>0&&this.initPopulateAutocomplete()})).catch((t=>{console.error("[checkoutAutocomplete] getJson failed ",t)}))}initPopulateAutocomplete(){"IT"===this.selectCountry.val()&&this.populateAutocompleteItaly(),this.selectCountry.on("select2:select",(t=>{const e=t.params.data;this.selectState.val(null),this.selectCity.val(null),this.selectPostcode.val(null),"IT"===e.id?(this.selectCountry=jQuery("#billing_country"),this.selectState=jQuery("#billing_state"),this.selectCity=jQuery("#billing_city"),this.selectPostcode=jQuery("#billing_postcode"),this.populateAutocompleteItaly()):[this.selectCity,this.selectPostcode].forEach((t=>{t.hasClass("select2-hidden-accessible")&&(t.select2("destroy"),t.prop("disabled",!1))}))}))}populateAutocompleteItaly(){this.initializeSelect2Fields([this.selectCity,this.selectPostcode]),this.populateAutocompleteCity(this.selectState.val()),this.selectState.on("select2:select",(t=>{const e=t.params.data;this.initializeSelect2Fields([this.selectCity,this.selectPostcode]),e.id&&this.populateAutocompleteCity(e.id)})),this.populateAutocompletePostcode(this.selectCity.val()),this.selectCity.on("select2:select",(t=>{const e=t.params.data;this.initializeSelect2Fields([this.selectPostcode]),e.id&&this.populateAutocompletePostcode(e.id)}))}populateAutocompleteCity(t){const e=this.citiesJson.filter((e=>e.ProvinceCode===t)).map((t=>({id:t.Title,text:t.Title})));e.length&&this.selectCity.select2({...this.selectOption,disabled:!1,data:e})}populateAutocompletePostcode(t){const e=this.citiesJson.find((e=>e.Title===t));if(!e)return;const i=e.ZipCodes.map((t=>({id:t,text:t})));i.length&&this.selectPostcode.select2({...this.selectOption,disabled:!1,data:i})}}},996:function(t){var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===i}(t)}(t)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(t,e){return!1!==e.clone&&e.isMergeableObject(t)?n((i=t,Array.isArray(i)?[]:{}),t,e):t;var i}function o(t,e,i){return t.concat(e).map((function(t){return s(t,i)}))}function c(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return Object.propertyIsEnumerable.call(t,e)})):[]}(t))}function l(t,e){try{return e in t}catch(t){return!1}}function n(t,i,r){(r=r||{}).arrayMerge=r.arrayMerge||o,r.isMergeableObject=r.isMergeableObject||e,r.cloneUnlessOtherwiseSpecified=s;var a=Array.isArray(i);return a===Array.isArray(t)?a?r.arrayMerge(t,i,r):function(t,e,i){var o={};return i.isMergeableObject(t)&&c(t).forEach((function(e){o[e]=s(t[e],i)})),c(e).forEach((function(c){(function(t,e){return l(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,c)||(l(t,c)&&i.isMergeableObject(e[c])?o[c]=function(t,e){if(!e.customMerge)return n;var i=e.customMerge(t);return"function"==typeof i?i:n}(c,i)(t[c],e[c],i):o[c]=s(e[c],i))})),o}(t,i,r):s(i,r)}n.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return n(t,i,e)}),{})};var r=n;t.exports=r}}]);
//# sourceMappingURL=ground-checkoutAutocomplete.bundle.min.js.map