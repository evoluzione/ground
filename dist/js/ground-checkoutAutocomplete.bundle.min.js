"use strict";(self.webpackChunkground=self.webpackChunkground||[]).push([[897],{162:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});var o=i(996),s=i.n(o);function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e);if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class n{constructor(t,e){r(this,"citiesJson",[]),r(this,"selectOption",{placeholder:"Seleziona un'opzione..."}),r(this,"selectCountry",jQuery("#billing_country")),r(this,"selectState",jQuery("#billing_state")),r(this,"selectCity",jQuery("#billing_city")),r(this,"selectPostcode",jQuery("#billing_postcode")),this.element=t||"form.woocommerce-checkout",this.defaults={triggers:this.element},this.options=e?s()(this.defaults,e):this.defaults,this.init()}async init(){this.getJson()}initializeSelect2Fields(t){t.forEach((t=>t.select2({...this.selectOption,disabled:!0})))}getJson(){const t=document.body.dataset.templateUrl;t&&jQuery.getJSON(`${t}/data/db/Cities-it.json`,(function(t){return t})).then((t=>{this.citiesJson=t,t.length>0&&this.initPopulateAutocomplete()})).catch((t=>{console.error("[checkoutAutocomplete] getJson failed ",t)}))}initPopulateAutocomplete(){"IT"===this.selectCountry.val()&&this.populateAutocompleteItaly(),this.selectCountry.on("select2:select",(t=>{const e=t.params.data;this.selectState.val(null),this.selectCity.val(null),this.selectPostcode.val(null),"IT"===e.id?(this.selectCountry=jQuery("#billing_country"),this.selectState=jQuery("#billing_state"),this.selectCity=jQuery("#billing_city"),this.selectPostcode=jQuery("#billing_postcode"),this.populateAutocompleteItaly()):[this.selectCity,this.selectPostcode].forEach((t=>{t.hasClass("select2-hidden-accessible")&&(t.select2("destroy"),t.prop("disabled",!1))}))}))}populateAutocompleteItaly(){this.initializeSelect2Fields([this.selectCity,this.selectPostcode]),this.populateAutocompleteCity(this.selectState.val()),this.selectState.on("select2:select",(t=>{const e=t.params.data;this.initializeSelect2Fields([this.selectCity,this.selectPostcode]),e.id&&this.populateAutocompleteCity(e.id)})),this.populateAutocompletePostcode(this.selectCity.val()),this.selectCity.on("select2:select",(t=>{const e=t.params.data;this.initializeSelect2Fields([this.selectPostcode]),e.id&&this.populateAutocompletePostcode(e.id)}))}populateAutocompleteCity(t){const e=this.citiesJson.filter((e=>e.ProvinceCode===t)).map((t=>({id:t.Title,text:t.Title})));e.length&&this.selectCity.select2({...this.selectOption,disabled:!1,data:e})}populateAutocompletePostcode(t){const e=this.citiesJson.find((e=>e.Title===t));if(!e)return;const i=e.ZipCodes.map((t=>({id:t,text:t})));i.length&&this.selectPostcode.select2({...this.selectOption,disabled:!1,data:i})}}},996:function(t){var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===i}(t)}(t)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(t,e){return!1!==e.clone&&e.isMergeableObject(t)?c((i=t,Array.isArray(i)?[]:{}),t,e):t;var i}function s(t,e,i){return t.concat(e).map((function(t){return o(t,i)}))}function r(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function n(t,e){try{return e in t}catch(t){return!1}}function c(t,i,l){(l=l||{}).arrayMerge=l.arrayMerge||s,l.isMergeableObject=l.isMergeableObject||e,l.cloneUnlessOtherwiseSpecified=o;var a=Array.isArray(i);return a===Array.isArray(t)?a?l.arrayMerge(t,i,l):function(t,e,i){var s={};return i.isMergeableObject(t)&&r(t).forEach((function(e){s[e]=o(t[e],i)})),r(e).forEach((function(r){(function(t,e){return n(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(n(t,r)&&i.isMergeableObject(e[r])?s[r]=function(t,e){if(!e.customMerge)return c;var i=e.customMerge(t);return"function"==typeof i?i:c}(r,i)(t[r],e[r],i):s[r]=o(e[r],i))})),s}(t,i,l):o(i,l)}c.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return c(t,i,e)}),{})};var l=c;t.exports=l}}]);
//# sourceMappingURL=ground-checkoutAutocomplete.bundle.min.js.map