"use strict";(self.webpackChunkground=self.webpackChunkground||[]).push([[201],{669:function(e,s,t){t.r(s),t.d(s,{default:function(){return h}});var a=t(442),n=t(630);class h{constructor(e){this.element=e||"js-ajax-search",this.DOM={html:document.documentElement,body:document.body,element:document.getElementById(this.element),searchMobile:document.getElementById("js-search-mobile"),searchClose:document.getElementById("js-search-close"),searchForm:document.getElementById("js-search-form"),searchDesktop:document.getElementById("js-search-desktop"),searchFormAjax:document.getElementById("js-ajax-search"),searchResult:document.getElementById("js-ajax-search-result"),searchInput:document.getElementById("js-ajax-search-input")},this.adminAjaxUrl=`${window.location.protocol}//${window.location.host}/wp-admin/admin-ajax.php`,this.searchLoadingClass="is-search-loading",this.init(),window.addEventListener("resize",(()=>{(0,n.Z)().any||(this.DOM.html.classList.remove("is-search-open"),this.DOM.searchForm.classList.remove("is-search-open"),this.init())}))}init(){if(window.matchMedia("(max-width: 1024px)").matches?this.DOM.searchMobile&&this.DOM.searchMobile.append(this.DOM.searchFormAjax):this.DOM.searchDesktop&&this.DOM.searchDesktop.append(this.DOM.searchFormAjax),0===this.DOM.element.length)return;const e=function(e,s,t){let a;return function(){const s=this,n=arguments,h=()=>{a=null,e.apply(s,n)},i=t;clearTimeout(a),a=setTimeout(h,250),i&&e.apply(s,n)}}((()=>{this.search()}));this.DOM.searchInput.addEventListener("input",(()=>{this.DOM.html.classList.add("is-search-open"),this.DOM.searchForm.classList.add("is-search-open")})),this.DOM.searchInput.addEventListener("input",e),this.DOM.searchClose.addEventListener("click",(()=>{this.DOM.searchValue=""}))}search(){const e=this.DOM.searchInput.value;this.DOM.searchClose.addEventListener("click",(()=>{this.DOM.searchValue=""})),""!==e?(this.beforeSend(),window.fetch(this.adminAjaxUrl,{method:"post",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:`action=data_fetch&keyword=${e}`}).then((e=>e.text())).then((e=>this.success(e))).catch((e=>{a.f&&console.error("ðŸ”¥Error:",e)}))):this.DOM.searchResult.innerHTML=""}beforeSend(){this.DOM.element.classList.add(this.searchLoadingClass),this.DOM.searchResult.innerHTML=""}success(e){this.DOM.element.classList.remove(this.searchLoadingClass),this.DOM.searchResult.innerHTML=e}}}}]);
//# sourceMappingURL=ground-search.bundle.min.js.map