"use strict";(self.webpackChunkground=self.webpackChunkground||[]).push([[336],{691:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var l=s(630);class n{constructor(e){this.element=e||".navigation__item.has-children",this.defaults={triggers:this.element,level:0},this.DOM={element:document.querySelectorAll(this.element),html:document.querySelector("html"),back:document.querySelectorAll(".js-back"),navicon:document.querySelector(".js-navicon"),menuBody:document.querySelector(".js-menu-body"),menuContainer:document.querySelector(".js-menu-container"),closeOverlayPanel:document.querySelector(".js-close-overlay-panel"),closePanel:document.querySelector(".js-close-panel"),menuPanel:document.querySelector(".js-navigation-panel")},this.unitMeasure={panel:"%",default:"vw"},this.init(),window.addEventListener("resize",this.handleOnResizeMenu)}handleOnResizeMenu=function(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,l=!1;const n=()=>{null==t?l=!1:(e(...t),t=null,setTimeout(n,s))};return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];l?t=i:(e(...i),l=!0,setTimeout(n,s))}}((()=>{this.resetTransformStyle([this.DOM.menuContainer,this.DOM.menuPanel]),this.DOM.html.classList.remove("is-navigation-open","is-sub-navigation-open","is-overlay-panel-open"),this.removeAllClass()}));resetTransformStyle(e){e.forEach((e=>{e&&(e.style.cssText+="transform: none")}))}removeAllClass(){for(let e=0;e<=this.defaults.level-1;e++)this.DOM.element.forEach((t=>{t.classList.contains(`level${e}`)&&(t.classList.remove(`level${e}`),t.childNodes.forEach((e=>e.classList?.contains("is-active")?e.classList.remove("is-active"):null)))}));this.defaults.level=0}getUnitMeasure(e){return e?.classList.contains("js-navigation-panel")?this.unitMeasure.panel:this.unitMeasure.default}multiLevelMenu=(e,t)=>{const s=this.getUnitMeasure(t);let l=null,n=null;if(e.target.parentNode.childNodes.forEach((e=>{e.classList?.contains("navigation__sub-menu")&&(l=e),e.classList?.contains("navigation__image")&&(n=e)})),l&&t){e.preventDefault(),e.target.parentElement.classList.add(`level${this.defaults.level}`),this.DOM.html.classList.add("is-sub-navigation-open"),l.classList.add("is-active"),n?.classList.add("is-active"),this.defaults.level++;let a=-100*this.defaults.level;t.style.cssText+=`transform: translateX(${a}${s});`,this.DOM.menuBody.scrollTo({top:0,left:0,behavior:"smooth"})}};multiLevelBack=e=>{const t=this.getUnitMeasure(e);if(this.defaults.level>0){this.defaults.level--,this.DOM.element.forEach((e=>{e.classList.contains(`level${this.defaults.level}`)&&(e.classList.remove(`level${this.defaults.level}`),e.childNodes.forEach((e=>e.classList?.contains("is-active")?e.classList.remove("is-active"):null)))}));let s=-100*this.defaults.level;e.style.cssText+=`transform: translateX(${s}${t});`,0===this.defaults.level&&this.DOM.html.classList.remove("is-sub-navigation-open")}};resetAll(e){e.stopImmediatePropagation(),this.DOM.html.classList.remove("is-sub-navigation-open","is-overlay-panel-open"),this.resetTransformStyle([this.DOM.menuContainer,this.DOM.menuPanel]),this.removeAllClass()}handleLevelNavigation(){this.DOM.element.forEach((e=>{const t=document.createElement("span");t.classList="js-drilldown",e.appendChild(t),e.addEventListener("click",(e=>{const t=e.target.className,s=t?.includes("js-drilldown");s&&(e.stopImmediatePropagation(),e.preventDefault(),window.matchMedia("(max-width:1024px)").matches?this.multiLevelMenu(e,this.DOM.menuContainer):e.target.parentNode.classList.contains("navigation__item--panel-primary")&&this.multiLevelMenu(e,this.DOM.menuPanel))}))}))}handleLevelBackNavigation(){this.DOM.back.forEach((e=>{e.addEventListener("click",(e=>{e.stopImmediatePropagation(),window.matchMedia("(max-width:1024px)").matches?this.multiLevelBack(this.DOM.menuContainer):this.multiLevelBack(this.DOM.menuPanel)}))}))}handleNaviconClick(){this.DOM.navicon&&this.DOM.navicon.addEventListener("click",(e=>this.resetAll(e)))}handleCloseNavigationPanel(){this.DOM.closePanel&&this.DOM.closePanel.addEventListener("click",(e=>this.resetAll(e)))}handleCloseOverlayPanel(){this.DOM.closeOverlayPanel&&!(0,l.Z)().any&&this.DOM.closeOverlayPanel.addEventListener("click",(e=>this.resetAll(e)))}init(){this.DOM.element.length&&(this.handleLevelNavigation(),this.handleLevelBackNavigation(),this.handleNaviconClick(),this.handleCloseNavigationPanel(),this.handleCloseOverlayPanel())}}}}]);
//# sourceMappingURL=ground-menu.bundle.min.js.map